<!doctype html>
<html lang="en">

<head>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>

  <meta charset="utf-8">
  <title>Clients WebApp</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">



</head>

<body>
  <app-root></app-root>
</body>

</html>

<script type="text/javascript">

  function Alerta() {
    alert('');
  }

  function InsertClient() {

    var CPF = document.getElementById('cpf');
    var NOME = document.getElementById('nome');
    var TELEFONE = document.getElementById('telefone');
    var DATANASC = document.getElementById('dataNasc');
    var SEXO = document.getElementById('sexo');

    // AJAX Post Request to API
    $.ajax({
      url: 'https://localhost:44349/api/Clients',
      dataType: 'json',
      type: 'post',
      contentType: 'application/json',
      data: JSON.stringify({ "cpf": CPF.value, "nome": NOME.value, "telefone": TELEFONE.value, "dataNasc": DATANASC.value, "sexo": SEXO.value, "atividade": 1 }),
      processData: false,
      success: function (msg) {
        //alert(msg); // if the request be succesifully 
      },
      error: function (xhr, textStatus, errorThrown) {
        //alert("error: \n" + xhr.catch); // if the request return error
      }
    });
  }


  function ShowClients() {

    // AJAX Get Request to API
    $.ajax({
      url: "https://localhost:44349/api/Clients",
      type: 'GET',
      dataType: "json",
      success: function (data) {

        var ListaDeProdutos = document.getElementById("ClientsTable");

        data.forEach(obj => {   

          ListaDeProdutos.innerHTML += `<td>${obj.id}</td>` + `<td class="teste">${obj.cpf}</td>` + `<td>${obj.nome}</td>` + `<td>${obj.telefone}</td>` + `<td>${obj.dataNasc}</td>` + `<td>${obj.sexo}</td>`+ `<td>${obj.atividade}</td>` 
           + `<th>${`<a class="link" onclick="DeleteClient(${obj.cpf});" style="cursor: pointer;">${'| Delete '}</a>` + "  " +
              `<a class="link" href="/edit" onclick="EditClient();" style="cursor: pointer;">${'| Edit |'}</a>`}<th>`;
                
          console.log(ListaDeProdutos.value );

        });
      },
    });

    
  }

  function ShowActivesClients() {

    // AJAX Get Request to API
    $.ajax({
      url: "https://localhost:44349/api/Clients/actives",
      type: 'GET',
      dataType: "json",
      success: function (data) {

        var ListaDeProdutos = document.getElementById("ClientsTable");

        data.forEach(obj => {          
          ListaDeProdutos.innerHTML += `<td>${obj.id}</td>` + `<td class="teste">${obj.cpf}</td>` + `<td>${obj.nome}</td>` + `<td>${obj.telefone}</td>` + `<td>${obj.dataNasc}</td>` + `<td>${obj.sexo}</td>`+ `<td>${obj.atividade}</td>` 
           + `<th>${`<a class="link" onclick="DeleteClient(${obj.cpf});" style="cursor: pointer;">${'| Delete '}</a>` + "  " +
              `<a class="link" href="/edit" onclick="EditClient();" style="cursor: pointer;">${'| Edit |'}</a>`}<th>`;
        });
      },
    });
  }

  function ShowClient() {

    // AJAX Get Request to API
    $.ajax({
      url: 'https://localhost:44349/api/Clients/000' + arguments[0],
      dataType: 'text',
      type: 'get',
      contentType: 'application/json',
      processData: false,
      success: function (data) {
        alert(data);
      },
      error: function (xhr, textStatus, errorThrown) {
        alert("error: \n" + xhr.catch); // if the request return error
      }
    });
  }

  function DeleteClient() {
    var answer = window.confirm("Are you sure you want to DELETE this Client ?" + arguments[0])
    if (answer) {

      // AJAX Delete Request to API
      $.ajax({
        url: 'https://localhost:44349/api/Clients/del/' + arguments[0], // url
        type: 'DELETE', // request type
        success: function (msg) {
          alert(msg); // if the request be succesifully 
        },
        error: function (xhr, textStatus, errorThrown) {
          alert("error: \n" + xhr.catch); // if the request return error
        }
      });
    }
    else {
      // do nothing
    }
  }

  function EditClient() {

    var CPF = document.getElementById('cpf');
    var NOME = document.getElementById('nome');
    var TELEFONE = document.getElementById('telefone');
    var DATANASC = document.getElementById('dataNasc');
    var SEXO = document.getElementById('sexo');

    // AJAX Put Request to API
    $.ajax({
      url: 'https://localhost:44349/api/Clients',
      dataType: 'json',
      type: 'put',
      contentType: 'application/json',
      data: JSON.stringify({ "cpf": CPF.value, "nome": NOME.value, "telefone": TELEFONE.value, "dataNasc": DATANASC.value, "sexo": SEXO.value, "atividade": 1 }),
      processData: false,
      success: function (msg) {
        //alert(msg); // if the request be succesifully 
      },
      error: function (xhr, textStatus, errorThrown) {
        //alert("error: \n" + xhr.catch); // if the request return error
      }
    });


  }



</script>